<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Генератор таблиць - виведення таблиці</title>
    <link rel="shortcut icon" href="icon.ico" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link href="css/templates.css" rel="stylesheet">
    <link href="css/content.css" rel="stylesheet">
    <script>
        window.onload = function () {
            window.resizeTo(800, 600)
            renderTable()
        }
        function renderTable(){
            let tableHtml = document.getElementById("table")
            window.table = window.localStorage.getItem("table").split(",RW")
            for(let i = 0; i < table.length; i++){
                table[i] = table[i].split(",CL")
                for(let j = 0; j < table[i].length; j++){
                    table[i][j] = table[i][j].split(',')
                }
            }
            table[0][0].unshift(0)
            for (let i = 0; i < table.length-1; i++) {
                let row = document.createElement("tr")
                row.classList.add("row")
                for (let j = 0; j < table[i].length-1; j++) {
                        let cell = document.createElement("td")
                        cell.id = i + " " + j
                        let textarea = document.createElement("textarea")
                        if(i !== parseInt(table[i][j][1].split(" ")[0]) || j !== parseInt(table[i][j][1].split(" ")[1])) {
                            cell.style.width = "70px"
                            cell.style.height = "40px"
                            cell.style.visibility = "hidden"
                            textarea.disabled = true
                        }
                        else{
                            cell.style.width = table[i][j][2]
                            cell.style.height = table[i][j][3]
                        }
                        cell.colSpan = parseInt(table[i][j][2]) / 70;
                        cell.rowSpan = parseInt(table[i][j][3]) / 40;
                        cell.style.border = "solid 0.5px";
                        cell.style.padding = "5px 10px"
                        textarea.classList.add("cell-input")
                        textarea.value = table[i][j][5]
                        textarea.style.textAlign = table[i][j][4]
                        textarea.readOnly = "readonly"
                        cell.appendChild(textarea)
                        row.appendChild(cell)
                }
                tableHtml.appendChild(row)
            }
        }
    </script>
</head>
<body>
    <div id="table-container"><table id="table"></table></div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
</body>
</html>